<template>  <Header :current-user="this.currentUser"/>    <div class="edit-wrapper mt-5 gap-4">      <div class="card" style="width: 30rem;">        <div class="card-header" style="height: 40px; background: transparent">          <p>{{ newCar.user.name }}</p>        </div>        <div :style="`background-image: url(http://localhost/imgs/${currentCarImage});`" id="card-image"></div>        <div class="card-body">          <h5 class="card-title">{{newCar.brand}}</h5>          <p class="card-text">{{newCar.model}}</p>          <p class="card-text">{{newCar.year}}</p>          <p class="card-text">{{newCar.licensePlate}}</p>          <p class="card-text">{{newCar.price}}</p>          <p class="card-text" v-if="newCar.hasAirBag == 1">Has Air Bag</p>          <p class="card-text" v-if="newCar.hasInsurance == 1">Has Insurance</p>        </div>      </div>      <form @submit.prevent="submitEditedCar" class="border border-1 px-5 py-3" style="width: 30rem !important;">        <h1 class="fs-5 text-center">Post car</h1>        <div class="mb-3">          <input class="form-control" type="file" name="imageInput" id="formFile" @change="getImage">        </div>        <p v-if="!writeYourself" class="text-end text-primary mt-1" @click="handleWriteCar" style="cursor: pointer">          not found in the list ? write it yourself</p>        <p v-else class="text-end text-primary mt-1" @click="handleWriteCar" style="cursor: pointer">          Go back to select!</p>        <select v-if="!writeYourself" class="form-select" aria-label="Default select example" name="brandSelect" v-model="newCar.brand" @change="createModelOptions">          <option selected>Brand</option>          <option              v-for="brand in brandSelectOptions"              :value="brand.nome"              :id="brand.codigo"          >            {{ brand.nome }}          </option>        </select>        <input v-else type="text" class="form-control mb-2" id="brand" placeholder="Brand" v-model="newCar.brand">        <select v-if="!writeYourself" class="form-select mt-4 mb-2" aria-label="Default select example" name="modelSelect" v-model="newCar.model" @change="createYearOptions">          <option selected>Model</option>          <option              v-for="model in modelsSelectOptions"              :value="model.nome"              :id="model.codigo"          >            {{ model.nome }}          </option>        </select>        <input v-else type="text" class="form-control mt-4 mb-2" id="model" placeholder="Model" v-model="newCar.model">        <select v-if="!writeYourself" class="form-select mt-4 mb-2" aria-label="Default select example" v-model="newCar.year">          <option selected>Year</option>          <option              v-for="year in yearsSelectOptions"              :value="year"          >            {{ year }}          </option>        </select>        <input v-else type="number" class="form-control mt-4 mb-2" id="year" placeholder="1999" v-model="newCar.year">        <div class="mb-3" v-if="newCar.carFuel && !writeYourself">          <p>Car fuel: {{ this.newCar.carFuel }}</p>        </div>        <label v-if="writeYourself" for="carFuel" class="label mt-2">Car Fuel</label>        <select v-if="writeYourself" class="form-select mb-2" aria-label="Default select example" v-model="newCar.carFuel">          <option selected value="Diesel">Diesel</option>          <option value="Gasolina">Gasolina</option>        </select>        <div class="d-flex align-items-center gap-3 mt-3">          <div class="input-group mb-3 w-50">            <div class="input-group-text">              <input v-if="newCar.hasAirBag" checked class="form-check-input mt-0" type="checkbox" @click="newCar.hasAirBag = !newCar.hasAirBag" aria-label="Checkbox for following text input" >              <input v-else class="form-check-input mt-0" type="checkbox" @click="newCar.hasAirBag = !newCar.hasAirBag" aria-label="Checkbox for following text input" >            </div>            <input type="text" readonly class="form-control" value="Air Bag" aria-label="Text input with checkbox" >          </div>          <div class="input-group mb-3" style="width: 170px">            <div class="input-group-text">              <input v-if="newCar.hasInsurance" checked class="form-check-input mt-0" type="checkbox" @click="newCar.hasInsurance = !newCar.hasInsurance" aria-label="Checkbox for following text input">              <input v-else class="form-check-input mt-0" type="checkbox" @click="newCar.hasInsurance = !newCar.hasInsurance" aria-label="Checkbox for following text input">            </div>            <input type="text" readonly class="form-control" value="Has insurance" aria-label="Text input with checkbox">          </div>        </div>        <div class="mb-3">          <label for="exampleFormControlInput1" class="form-label">Price</label>          <input type="text" class="form-control" id="exampleFormControlInput1" v-model="newCar.price" placeholder="R$1000000">        </div>        <div class="mb-3">          <label for="exampleFormControlInput1" class="form-label">License plate</label>          <input type="text" maxlength="8" class="form-control" id="exampleFormControlInput1" v-model="newCar.licensePlate" placeholder="XXX-XXXX">        </div>        <button type="submit" class="btn btn-primary">Save changes</button>        <router-link to="/home"><button type="button" class="btn btn-primary ms-2">Cancel</button></router-link>        <div v-if="validators" v-for="validator in this.validators" class="alert alert-danger mt-3" role="alert">          {{ validator[0] }}        </div>      </form>    </div></template><script>import Header from "../components/Header.vue";import axios from "../axios";import router from "../routes";export default {  name: "EditCar",  components: {    Header  },  data(){    return {      currentUser: {},      currentCarImage: '',      brandSelectOptions: [],      modelsSelectOptions: [],      yearsSelectOptions: [],      newCar: {        brand: 'Brand',        model: 'Model',        year: 'Year',        price: null,        image: null,        carFuel: '',        hasAirBag: false,        hasInsurance: false,        licensePlate: '',      },      validators: null,      loading: false,      writeYourself: false,    }  },  beforeCreate() {    axios.get('http://localhost/api/user', {      withCredentials: true    })        .then((response) => {          this.currentUser = response.data        })        .catch((error) => router.push({path: '/login'}))  },  beforeMount() {    let carUrl = 'https://parallelum.com.br/fipe/api/v1/carros/marcas';    axios.get(carUrl, {withCredentials: false})        .then((response) => {          this.brandSelectOptions = response.data;          this.createModelOptions();        })        .catch((error) => console.error(error))    let url = `http://localhost/api/update/${this.$route.params.carId}`    axios.get(url)        .then((response) => {          let car = response.data.car          for(let user of response.data.users){            if(car.user_id === user.id){              car.user = user;              this.newCar = car;              this.newCar.hasAirBag = this.newCar.hasAirBag === 1 ? true : false;              this.newCar.hasInsurance = this.newCar.hasInsurance === 1 ? true : false;              this.newCar.price = (this.newCar.price/100).toLocaleString('pt-br',{style: 'currency', currency: 'BRL'})              this.currentCarImage = car.image;            }          }        }).catch((error) => console.log(error))  },  methods: {    handleWriteCar(){      this.writeYourself = !this.writeYourself;    },    createModelOptions(){      let brandSelect = document.querySelector('select[name="brandSelect"]');      let brandId = brandSelect.options[brandSelect.selectedIndex].id      let url = `https://parallelum.com.br/fipe/api/v1/carros/marcas/${brandId}/modelos`;      axios.get(url, {withCredentials: false})          .then((response) => {            this.modelsSelectOptions = response.data.modelos            this.createYearOptions();          }).catch((error) => console.error(error))    },    createYearOptions(){      let brandSelect = document.querySelector('select[name="brandSelect"]');      let brandId = brandSelect.options[brandSelect.selectedIndex].id;      let modelSelect = document.querySelector('select[name="modelSelect"]');      let modelId = modelSelect.options[modelSelect.selectedIndex].id;      let url = `https://parallelum.com.br/fipe/api/v1/carros/marcas/${brandId}/modelos/${modelId}/anos`;      axios.get(url, {withCredentials: false})          .then((response) => {            for(let year of response.data){              let data = year.nome.split(' ');              this.yearsSelectOptions.push(data[0])              this.newCar.carFuel = data[1]            }          }).catch((error) => console.error(error))    },    getImage(e){      this.newCar.image = e.target.files[0];    },    submitEditedCar(){      let price = this.newCar.price.replace(/[^0-9]/g,'')      this.newCar.price = price;      let url = `http://localhost/api/update/car/${this.$route.params.carId}`;      axios.post(url, this.newCar, {        headers: {          'content-Type': 'multipart/form-data',        }      }).then((response) => {        if(response.status === 200){          router.push({path: '/home'});        }      }).catch((error) => console.log(error))    }  }}</script><style scoped>  .edit-wrapper{    display: flex;    justify-content: center;  }  #card-image{    width: 100%;    height: 300px;    background-size: cover;    background-position: center;  }</style>